<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Patatap Clone</title>
    <!-- Paper JS -->
    <script type="text/Javascript" src="assets/JS/paper-full.js"></script>
    <!-- Howler JS -->
    <script type="text/Javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.0/howler.core.min.js"></script>
    <!-- Styles for the Page -->
    <link rel="stylesheet" href="assets/CSS/style.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Architects+Daughter&display=swap" rel="stylesheet">
    <!-- Canvas for paper Js -->
    <script type="text/paperscript" canvas="myCanvas">

var head = document.getElementById("header");
var btn = document.getElementById("loopOn");
var btn1 = document.getElementById("loopOff");

var loopVal=false;
var keyData={};

document.addEventListener("keypress",function(){
    head.style.display="none";
});

btn1.addEventListener("mouseover",function(){
    btn1.classList.add("buttonHover");
});
btn1.addEventListener("mouseout",function(){
    btn1.classList.remove("buttonHover");
});
btn.addEventListener("mouseover",function(){
    btn.classList.add("buttonHover");
});
btn.addEventListener("mouseout",function(){
    btn.classList.remove("buttonHover");
});


btn1.addEventListener("click",function(){
    location.reload();
});

    btn.addEventListener("click",function(){
        btn.classList.add("buttonClicked");
        console.log("clicked");
        loopVal=true;
    keyData = {
    a: {
        sound: new Howl({
            src: ['assets/Sound/sounds/bubbles.mp3'],
            rate:2,
            loop:loopVal
            
        })
    },
    b: {
        sound: new Howl({
            src: ['assets/Sound/sounds/clay.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    c: {
        sound: new Howl({
            src: ['assets/Sound/sounds/confetti.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    d: {
        sound: new Howl({
            src: ['assets/Sound/sounds/corona.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    e: {
        sound: new Howl({
            src: ['assets/Sound/sounds/dotted-spiral.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    f: {
        sound: new Howl({
            src: ['assets/Sound/sounds/flash-1.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    g: {
        sound: new Howl({
            src: ['assets/Sound/sounds/flash-2.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    h: {
        sound: new Howl({
            src: ['assets/Sound/sounds/flash-3.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    i: {
        sound: new Howl({
            src: ['assets/Sound/sounds/glimmer.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    j: {
        sound: new Howl({
            src: ['assets/Sound/sounds/moon.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    k: {
        sound: new Howl({
            src: ['assets/Sound/sounds/pinwheel.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    l: {
        sound: new Howl({
            src: ['assets/Sound/sounds/piston-1.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    m: {
        sound: new Howl({
            src: ['assets/Sound/sounds/piston-2.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    n: {
        sound: new Howl({
            src: ['assets/Sound/sounds/piston-3.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    o: {
        sound: new Howl({
            src: ['assets/Sound/sounds/prism-1.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    p: {
        sound: new Howl({
            src: ['assets/Sound/sounds/prism-2.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    q: {
        sound: new Howl({
            src: ['assets/Sound/sounds/prism-3.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    r: {
        sound: new Howl({
            src: ['assets/Sound/sounds/splits.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    s: {
        sound: new Howl({
            src: ['assets/Sound/sounds/squiggle.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    t: {
        sound: new Howl({
            src: ['assets/Sound/sounds/strike.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    u: {
        sound: new Howl({
            src: ['assets/Sound/sounds/suspension.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    v: {
        sound: new Howl({
            src: ['assets/Sound/sounds/timer.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    w: {
        sound: new Howl({
            src: ['assets/Sound/sounds/ufo.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    x: {
        sound: new Howl({
            src: ['assets/Sound/sounds/veil.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    y: {
        sound: new Howl({
            src: ['assets/Sound/sounds/wipe.mp3'],
            rate:2,
            loop:loopVal
        })
    },
    z: {
        sound: new Howl({
            src: ['assets/Sound/sounds/zig-zag.mp3'],
            rate:2,
            loop:loopVal
        })
        }
    };
});


var circles=[];
function onKeyDown(event) {
    if(keyData[event.key]){
    // When a key is pressed, set the content of the text item:
    var myCircle = new Path.Circle(new Point(Math.floor(Math.random() * view.size.width), Math.floor(Math.random() * view.size.height)), 400);
    myCircle.fillColor = "rgb(" + Math.floor(Math.random() * 256) + ", " + Math.floor(Math.random() * 256) + ", " + Math.floor(Math.random() * 256) + ")";
    console.log("loop contains " + keyData[event.key].sound.loop);
    keyData[event.key].sound.play();
    circles.push(myCircle);
    }
}

 function onFrame(event) {
     for (var i = 0; i < circles.length; i++) {
         circles[i].fillColor.hue+=1;
         circles[i].scale(.9);
         console.log(circles.length);
         if(circles[i].area <1){
            //  removing from the canvas
             circles[i].remove();
            //  Removing from the array
             circles.splice(i,1);
         }
     }
 }
        </script>
</head>

<body>
    <div id="header">
        <h4>Choose loop on or off then press any alphabet key on your keyboard and see the magic</h4>
    </div>
    <button id="loopOn">Loop ON</button>
    <button id="loopOff">Loop OFF</button>
    <canvas id="myCanvas" resize></canvas>

</body>

</html>